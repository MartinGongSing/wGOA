{% extends "base.html" %}

{% block title %} data {% endblock %}

<!-- Specific Page CSS goes HERE  -->
{% block stylesheets %}{% endblock stylesheets %}

{% block content %}

<h1>GRAPHICAL Representation</h1>

<!-- tooltip for precise info-->
<script src="http://ajax.googleapis.com/ajax/libs/jquery/1.11.2/jquery.min.js"></script>
<script src="https://code.highcharts.com/highcharts.src.js"></script>

<script src="https://code.highcharts.com/modules/heatmap.js"></script>

<!--Allows to export data : -->
<script src="https://code.highcharts.com/modules/exporting.js"></script>
<script src="https://code.highcharts.com/modules/export-data.js"></script>
<script src="https://code.highcharts.com/modules/accessibility.js"></script>


<div class="column">
    <div class="boxGray">
        <h2>CPC_UBI </h2>
        <p> {{ daycpc|safe }} </p>
        <div id={{ chartID|safe }} class="chart" style="height:500px; width:100%"></div>
    </div>
</div>


<div class="column">
    <div class="boxGray">
        <h2>NEPH UBI</h2>
        <p> {{ dayneph|safe }} </p>
        <div id={{ chartIDNeph|safe }} class="chart" style="height:500px; width:100%"></div>
    </div>
</div>

<br><br>


<div class="column">
    <div class="boxGray">
        <h2>APS UBI First try </h2>
        <p> {{ dayaps|safe }} </p>
    <!--TRY 1 -->
        <div id={{ chartIDAps|safe }} class="chart" style="height:500px; width:100%"></div>
    </div>
</div>

<div class="column">
    <div class="boxGray">
        <h2>PSAP</h2>
        <p> {{ daypsap|safe }} </p>
        <div id={{ chartIDPsap|safe }} class="chart" style="height:500px; width:100%"></div>

    </div>
</div>




        <!--###################-->
        <!--####### CPC #######-->
        <!--###################-->

<script>
    var chart_id =  {{ chartID|safe }}
    var chart =     {{ chart|safe }}
    var title =     {{ title|safe }}
    var xAxis =     {{ xAxis|safe }}
    var yAxis =     {{ yAxis|safe }}
    var series =    {{ series|safe }}
</script>
<!-- Highchart js. Variable map shown above -->
<script>
    $(document).ready(function() {
        $(chart_id).highcharts({
            chart: chart,
            title: title,
            xAxis: xAxis,
            yAxis: yAxis,
            series: series
        });
    });
</script>




<!--####################-->
<!--####### NEPH #######-->
<!--####################-->


<script>
    var chart_id_neph = {{ chartIDNeph|safe }}
    var chartNeph =   {{ chartNeph|safe }}
    var titleNeph =   {{ titleNeph|safe }}
    var xAxisNeph =   {{ xAxisNeph|safe }}
    var yAxisNeph =   {{ yAxisNeph|safe }}
    var seriesNeph =  {{ seriesNeph|safe }}
</script>
<!-- Highchart js. Variable map shown above -->
<script>

    $(document).ready(function() {
        $(chart_id_neph).highcharts({
            chart: chartNeph,
            title: titleNeph,
            xAxis: xAxisNeph,
            yAxis: yAxisNeph,
            series: seriesNeph
        });
    });
</script>


<!--####################-->
<!--####### PSAP #######-->
<!--####################-->
<script>
    var chart_id_psap = {{ chartIDPsap|safe }}
    var chartPsap =   {{ chartPsap|safe }}
    var titlePsap =   {{ titlePsap|safe }}
    var xAxisPsap =   {{ xAxisPsap|safe }}
    var yAxisPsap =   {{ yAxisPsap|safe }}
    var seriesPsap =  {{ seriesPsap|safe }}

</script>

<!-- Highchart js. Variable map shown above -->
<script>

    $(document).ready(function() {
        $(chart_id_psap).highcharts({
            chart: chartPsap,
            title: titlePsap,
            xAxis: xAxisPsap,
            yAxis: yAxisPsap,
            series: seriesPsap
        });
    });
</script>


<!--###################-->
<!--####### APS #######-->
<!--###################-->
<script>
    var chart_id_aps = {{ chartIDAps|safe }}
    var chartAps =   {{ chartAps|safe }}
    var chartAps2 =   {{ chartAps2|safe }}
    var titleAps =   {{ titleAps|safe }}
    var xAxisAps =   {{ xAxisAps|safe }}
    var yAxisAps =   {{ yAxisAps|safe }}
    var seriesAps =  {{ seriesAps|safe }}



</script>

<!-- Highchart js. Variable map shown above -->
<script>

    $(document).ready(function() {
        $(chart_id_aps).highcharts({
            chart: chartAps,
            title: titleAps,
            xAxis: xAxisAps,
            yAxis: yAxisAps,
            series: seriesAps
        });
    });


</script>




    <h2>APS UBI 2</h2>
    <div class="boxGray">
    <!--TRY 2 -->

        <figure class="highcharts-figure">
            <div id="apsid"></div>
        </figure>

<!-- SCRIPT FOR ALL DATA IN LIST -->
        <script>

            var datatest1 =   {{ datatest1|safe }}
            var datatest2 =   {{ datatest2|safe }}
            var datatest3 =   {{ datatest3|safe }}
            var datatest4 =   {{ datatest4|safe }}
            var datatest5 =   {{ datatest5|safe }}
            var datatest6 =   {{ datatest6|safe }}
            var datatest7 =   {{ datatest7|safe }}
            var datatest8 =   {{ datatest8|safe }}
            var datatest9 =   {{ datatest9|safe }}
            var datatest10=   {{ datatest10|safe }}
            var datatest11=   {{ datatest11|safe }}
            var datatest12=   {{ datatest12|safe }}
            var datatest13=   {{ datatest13|safe }}
            var datatest14=   {{ datatest14|safe }}
            var datatest15=   {{ datatest15|safe }}
            var datatest16=   {{ datatest16|safe }}
            var datatest17=   {{ datatest17|safe }}
            var datatest18=   {{ datatest18|safe }}
            var datatest19=   {{ datatest19|safe }}

            const listing = [];
            let ylist = [];

            for (let y = 0; y <= 18; y++) {
                switch (y) {
                    case 0:
                        ylist = datatest1;
                        break;
                    case 1 :
                        ylist = datatest2;
                        break;
                    case 2:
                        ylist = datatest3;
                        break;
                    case 3:
                        ylist = datatest4;
                        break;
                    case 4:
                        ylist = datatest5;
                        break;
                    case 5:
                        ylist = datatest6;
                        break;
                    case 6:
                        ylist = datatest7;
                        break;
                    case 7:
                        ylist = datatest8;
                        break;
                    case 8:
                        ylist = datatest9;
                        break;
                    case 9:
                        ylist = datatest10;
                        break;
                    case 10 :
                        ylist = datatest11;
                        break;
                    case 11 :
                        ylist = datatest12;
                        break;
                    case 12:
                        ylist = datatest13;
                        break;
                    case 13:
                        ylist = datatest14;
                        break;
                    case 14:
                        ylist = datatest15;
                        break;
                    case 15:
                        ylist = datatest16;
                        break;
                    case 16:
                        ylist = datatest17;
                        break;
                    case 17:
                        ylist = datatest18;
                        break;
                    case 18:
                        ylist = datatest19;
                        break;

                }
                for (let x = 0; x <= 39; x++) {
                  listing.push([x,y,ylist.shift()]);
                }
                // document.write(listing)
            }

            // console.log(listing);

        </script>


        <script>

            console.log(listing);


            function getPointCategoryName(point, dimension) {
            var series = point.series,
                isY = dimension === 'y',
                axis = series[isY ? 'yAxis' : 'xAxis'];
            return axis.categories[point[isY ? 'y' : 'x']];
            }

            Highcharts.chart('apsid', {

                chart: chartAps2,
                title: titleAps,
                xAxis: xAxisAps,
                yAxis: yAxisAps,
                series: [{
                    name: 'aps ubi',
                    borderWidth: 1,
                    data:listing,
                        // [
                        // [0, 0, vd1], [0, 1, vd2], [0, 2, vd3], [0, 3, vd4], [0, 4, vd5], [0, 5, vd6], [0, 6, vd7], [0, 7, vd8], [0, 8, vd9],
                        // [1, 0, vd11], [1, 1, vd12], [1, 2, vd13], [1, 3, vd14], [1, 4, vd15], [1, 5, vd16], [1, 6, vd17], [1, 7, vd18],[1, 8, vd19],
                        // [2, 0, vd21], [2, 1, vd22], [2, 2, vd23], [2, 3, vd24], [2, 4, vd25], [2, 5, vd26], [2, 6, vd27], [2, 7, vd28],[2, 8, vd29],
                        // [3, 0, vd31], [3, 1, vd32], [3, 2, vd33], [3, 3, vd34], [3, 4, vd35], [3, 5, vd36], [3, 6, vd37], [3, 7, vd38],[3, 8, vd39],
                        // [4, 0, vd41], [4, 1, vd42], [4, 2, vd43], [4, 3, vd44], [4, 4, vd45], [4, 5, vd46], [4, 6, vd47], [4, 7, vd48],[4, 8, vd49],
                        // [5, 0, vd51], [5, 1, vd52], [5, 2, vd53], [5, 3, vd54], [5, 4, vd55], [5, 5, vd56], [5, 6, vd57], [5, 7, vd58],[5, 8, vd59],
                    // ],

                    dataLabels: {
                        enabled: false,
                        color: '#000000'
                    }
                }],
                accessibility: {
                    point: {
                        descriptionFormatter: function (point) {
                            var ix = point.index + 1,
                                xName = getPointCategoryName(point, 'x'),
                                yName = getPointCategoryName(point, 'y'),
                                val = point.value;
                            return ix + '. ' + xName + ' time ' + yName + ', ' + val + '.' + 'change this is data3.HTML';
                        }
                    }
                },
                colorAxis: {
                    stops: [
                        [0, '#3060cf'],
                        [0.5, '#fffbbc'],
                        [0.9, '#c4463a'],
                        [1, '#c4463a']
                    ],
                },
                // colorAxis: {
                //
                //     min: 0,
                //     minColor: '#FFFFFF',
                //     maxColor: Highcharts.getOptions().colors[0]
                // },
                legend: {
                    align: 'right',
                    layout: 'vertical',
                    margin: 0,
                    verticalAlign: 'top',
                    y: 25,
                    symbolHeight: 280
                },
                tooltip: {
                    formatter: function () {
                        return 'At <b>' + getPointCategoryName(this.point, 'x') + '</b> <br> there was <b>' +
                            this.point.value + '</b> particules of <b>' + getPointCategoryName(this.point, 'y') + '</b>';
                    }
                },
                responsive: {
                    rules: [{
                        condition: {
                            maxWidth: 500
                        },
                        chartOptions: {
                            yAxis: {
                                labels: {
                                    formatter: function () {
                                        return this.value.charAt(0);
                                    }
                                }
                            }
                        }
                    }]
                }

            });


        </script>



    </div>
</div>

{% endblock content %}

