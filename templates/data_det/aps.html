{% extends "base.html" %}

{% block title %} aps {% endblock %}

<!-- Specific Page CSS goes HERE  -->
{% block stylesheets %}{% endblock stylesheets %}

{% block content %}


<!-- tooltip for precise info-->
<script src="http://ajax.googleapis.com/ajax/libs/jquery/1.11.2/jquery.min.js"></script>
<script src="https://code.highcharts.com/highcharts.src.js"></script>

<script src="https://code.highcharts.com/modules/heatmap.js"></script>

<!--Allows to export data : -->
<script src="https://code.highcharts.com/modules/exporting.js"></script>
<script src="https://code.highcharts.com/modules/export-data.js"></script>
<script src="https://code.highcharts.com/modules/accessibility.js"></script>



<!--<h1>cpc</h1>-->
<!--<form action="post">-->
<!--    <input type = "datetime-local">-->
<!--    <button type="submit">Submit</button>-->
<!--</form>-->


<h1>APS</h1>
<p>Enter date : </p>
<form method = "GET">
    {{ form }}
    <input type = "submit" value = "Submit">
</form>
<p>You have chosen : {{dateTimeDD|safe}}, data displayed : {{titleday}}</p>

<br>



<div class="boxGray">
    <figure class="highcharts-figure" >
        <div id="container"></div>
    </figure>
</div>





<!--variable imports-->
<script>
    var apsdet   =    {{ apsdet|safe }}
    var chartAps =     {{ chartAps|safe }}
    var titleAps =     {{ title|safe }}
    var xAxisAps =     {{ xAxis|safe }}
    var yAxisAps =     {{ yAxis|safe }}
    var Ddayaps=    {{ Ddayaps|safe }}
    var dayaps =       {{ dayaps|safe }}

</script>

<!-- SCRIPT FOR ALL DATA IN LIST -->
<script>

    var datatest1 =   {{ datatest1|safe }}
    var datatest2 =   {{ datatest2|safe }}
    var datatest3 =   {{ datatest3|safe }}
    var datatest4 =   {{ datatest4|safe }}
    var datatest5 =   {{ datatest5|safe }}
    var datatest6 =   {{ datatest6|safe }}
    var datatest7 =   {{ datatest7|safe }}
    var datatest8 =   {{ datatest8|safe }}
    var datatest9 =   {{ datatest9|safe }}
    var datatest10=   {{ datatest10|safe }}
    var datatest11=   {{ datatest11|safe }}
    var datatest12=   {{ datatest12|safe }}
    var datatest13=   {{ datatest13|safe }}
    var datatest14=   {{ datatest14|safe }}
    var datatest15=   {{ datatest15|safe }}
    var datatest16=   {{ datatest16|safe }}
    var datatest17=   {{ datatest17|safe }}
    var datatest18=   {{ datatest18|safe }}
    var datatest19=   {{ datatest19|safe }}
    var datatest20=   {{ datatest20|safe }}
    var datatest21=   {{ datatest21|safe }}
    var datatest22=   {{ datatest22|safe }}
    var datatest23=   {{ datatest23|safe }}
    var datatest24=   {{ datatest24|safe }}
    var datatest25=   {{ datatest25|safe }}
    var datatest26=   {{ datatest26|safe }}
    var datatest27=   {{ datatest27|safe }}
    var datatest28=   {{ datatest28|safe }}
    var datatest29=   {{ datatest29|safe }}
    var datatest30=   {{ datatest30|safe }}
    var datatest31=   {{ datatest31|safe }}
    var datatest32=   {{ datatest32|safe }}
    var datatest33=   {{ datatest33|safe }}
    var datatest34=   {{ datatest34|safe }}
    var datatest35=   {{ datatest35|safe }}
    var datatest36=   {{ datatest36|safe }}
    var datatest37=   {{ datatest37|safe }}
    var datatest38=   {{ datatest38|safe }}
    var datatest39=   {{ datatest39|safe }}
    var datatest40=   {{ datatest40|safe }}
    var datatest41=   {{ datatest41|safe }}
    var datatest42=   {{ datatest42|safe }}
    var datatest43=   {{ datatest43|safe }}
</script>

<!--SCRIPT FOR switch case to create list-->
<script>
    const listing = [];
    let ylist = [];
    // switch case
    for (let y = 0; y <= 42; y++) {
        switch (y) {
            case 0:
                ylist = datatest1;
                break;
            case 1 :
                ylist = datatest2;
                break;
            case 2:
                ylist = datatest3;
                break;
            case 3:
                ylist = datatest4;
                break;
            case 4:
                ylist = datatest5;
                break;
            case 5:
                ylist = datatest6;
                break;
            case 6:
                ylist = datatest7;
                break;
            case 7:
                ylist = datatest8;
                break;
            case 8:
                ylist = datatest9;
                break;
            case 9:
                ylist = datatest10;
                break;
            case 10 :
                ylist = datatest11;
                break;
            case 11 :
                ylist = datatest12;
                break;
            case 12:
                ylist = datatest13;
                break;
            case 13:
                ylist = datatest14;
                break;
            case 14:
                ylist = datatest15;
                break;
            case 15:
                ylist = datatest16;
                break;
            case 16:
                ylist = datatest17;
                break;
            case 17:
                ylist = datatest18;
                break;
            case 18:
                ylist = datatest19;
                break;
            case 19:
                ylist = datatest20;
                break;
            case 20 :
                ylist = datatest21;
                break;
            case 21 :
                ylist = datatest22;
                break;
            case 22:
                ylist = datatest23;
                break;
            case 23:
                ylist = datatest24;
                break;
            case 24:
                ylist = datatest25;
                break;
            case 25:
                ylist = datatest26;
                break;
            case 26:
                ylist = datatest27;
                break;
            case 27:
                ylist = datatest28;
                break;
            case 28:
                ylist = datatest29;
                break;
            case 29:
                ylist = datatest30;
                break;
            case 30 :
                ylist = datatest31;
                break;
            case 31 :
                ylist = datatest32;
                break;
            case 32:
                ylist = datatest33;
                break;
            case 33:
                ylist = datatest34;
                break;
            case 34:
                ylist = datatest35;
                break;
            case 35:
                ylist = datatest36;
                break;
            case 36:
                ylist = datatest37;
                break;
            case 37:
                ylist = datatest38;
                break;
            case 38:
                ylist = datatest39;
                break;
            case 39:
                ylist = datatest40;
                break;
            case 40 :
                ylist = datatest41;
                break;
            case 41 :
                ylist = datatest42;
                break;
            case 42 :
                ylist = datatest43;
                break;


        }
        for (let x = 0; x <= 20; x++) {
          listing.push([x,y,ylist.shift()]);
        }
        // document.write(listing)
    }
</script>

<!--Chart -->
<script>

    function getPointCategoryName(point, dimension) {
        var series = point.series,
            isY = dimension === 'y',
            axis = series[isY ? 'yAxis' : 'xAxis'];
        return axis.categories[point[isY ? 'y' : 'x']];
        }

Highcharts.chart('container', {

    chart: chartAps,
    title: titleAps,
    subtitle: Ddayaps,
    xAxis: xAxisAps,
    yAxis: yAxisAps,

    accessibility: {
            point: {
                descriptionFormatter: function (point) {
                    var ix = point.index + 1,
                        xName = getPointCategoryName(point, 'x'),
                        yName = getPointCategoryName(point, 'y'),
                        val = point.value;
                    return ix + '. ' + xName + ' time ' + yName + ', ' + val + '.' + 'change this is data3.HTML';
                }
            }
        },

    colorAxis: {
            stops: [
                [0, '#3060cf'],
                [0.5, '#fffbbc'],
                [0.9, '#c4463a'],
                [1, '#c4463a']
            ],
        },

    legend: {
            align: 'right',
            layout: 'vertical',
            margin: 0,
            verticalAlign: 'top',
            y: 25,
            symbolHeight: 280
        },

    tooltip: {
            formatter: function () {
                return 'At <b>' + getPointCategoryName(this.point, 'x') + '</b> <br> there was <b>' +
                    this.point.value + '</b> particules of <b>' + getPointCategoryName(this.point, 'y') + '</b>';
            }
        },

    series: [{
        name: 'aps ubi',
        borderWidth: 1,
        turboThreshold: 0, // set to 0 to have no limitations of values (default 1000 (40x 25))
        data: listing,//[[0, 0, 10], [0, 1, 19], [0, 2, 8], [0, 3, 24], [0, 4, 67], [1, 0, 92], [1, 1, 58], [1, 2, 78], [1, 3, 117], [1, 4, 48], [2, 0, 35], [2, 1, 15], [2, 2, 123], [2, 3, 64], [2, 4, 52], [3, 0, 72], [3, 1, 132], [3, 2, 114], [3, 3, 19], [3, 4, 16], [4, 0, 38], [4, 1, 5], [4, 2, 8], [4, 3, 117], [4, 4, 115], [5, 0, 88], [5, 1, 32], [5, 2, 12], [5, 3, 6], [5, 4, 120], [6, 0, 13], [6, 1, 44], [6, 2, 88], [6, 3, 98], [6, 4, 96], [7, 0, 31], [7, 1, 1], [7, 2, 82], [7, 3, 32], [7, 4, 30], [8, 0, 85], [8, 1, 97], [8, 2, 123], [8, 3, 64], [8, 4, 84], [9, 0, 47], [9, 1, 114], [9, 2, 31], [9, 3, 48], [9, 4, 91]],
        dataLabels: {
                enabled: false,
                color: '#000000'
            }
    }],

    responsive: {
            rules: [{
                condition: {
                    maxWidth: 500
                },
                chartOptions: {
                    yAxis: {
                        labels: {
                            formatter: function () {
                                return this.value.charAt(0);
                            }
                        }
                    }
                }
            }]
        }

});


</script>

<a href="/apsD">
    <button title="This might take some time">Show available days</button>
</a>

{% endblock content %}